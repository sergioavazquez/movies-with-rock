(this["webpackJsonpmovies-with-rock"]=this["webpackJsonpmovies-with-rock"]||[]).push([[0],{12:function(e,t,r){e.exports={"movie-details":"movieDetails_movie-details__2jfVw",show:"movieDetails_show__yABwa","movie-details__card":"movieDetails_movie-details__card__3EFdJ","movie-details__card__close":"movieDetails_movie-details__card__close__J51uQ","movie-details__card__description":"movieDetails_movie-details__card__description__2VEG6","movie-details__card__description__row":"movieDetails_movie-details__card__description__row__3jOIO","movie-details__card__description__row__label":"movieDetails_movie-details__card__description__row__label__2sgQr","movie-details__card__description__row__value":"movieDetails_movie-details__card__description__row__value__2uzxT","movie-details__card__description__row__value-title":"movieDetails_movie-details__card__description__row__value-title__3fczc","movie-details__card__description__row__value-no-pad":"movieDetails_movie-details__card__description__row__value-no-pad__2Vdvr"}},21:function(e,t,r){e.exports={"smooth-fade-enter":"transitions_smooth-fade-enter__2ALlF","smooth-fade-enter-active":"transitions_smooth-fade-enter-active__29pSy","smooth-fade-enter-done":"transitions_smooth-fade-enter-done__2j9Hc","smooth-fade-exit":"transitions_smooth-fade-exit__19Iel","smooth-fade-exit-active":"transitions_smooth-fade-exit-active__2Ui8g"}},24:function(e,t,r){e.exports={"rating-filter":"ratingFilter_rating-filter__2HnXD","rating-filter__star-full":"ratingFilter_rating-filter__star-full__6nvxN","rating-filter__star-outline":"ratingFilter_rating-filter__star-outline__1u9_B"}},25:function(e,t,r){e.exports={"movie-grid":"movieGrid_movie-grid__3BBbc","movie-grid__container":"movieGrid_movie-grid__container__3MsNc","movie-grid__card":"movieGrid_movie-grid__card__TdTx-","movie-grid__loader":"movieGrid_movie-grid__loader__35I7L",turn:"movieGrid_turn__GQ1fm"}},30:function(e,t,r){e.exports={header:"header_header__3fn4i",header__brand:"header_header__brand__JEX21",header__search:"header_header__search__3kbli"}},43:function(e,t,r){e.exports={error__main:"error_error__main__2hjhS"}},45:function(e,t,r){e.exports={spa:"spa_spa__3qUOz"}},57:function(e,t,r){},63:function(e,t,r){},65:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r(1),c=r.n(a),i=r(19),o=r.n(i),s=(r(57),r(40)),_=r(41),u=r(50),l=r(48),d=r(15),v="app/LOADING",p="app/FETCH_START",j="app/FETCH_SUCCESS",f="app/CONFIG_READY",b="app/API_CONFIG_READY",m="app/ERROR",O=function(e){return{type:v,loading:e}},h=function(e){return{type:p,movieFetchRequest:e}},x=function(e){return{type:j,movieList:e}},g=function(e){return{type:f,config:e}},w=function(e){return{type:b,apiConfig:e}},y=function(e,t){return{type:m,code:e,errorMsg:t}},N={api_root:"https://api.themoviedb.org/3/",bearer_token:"eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJhZjU3OWI5YjQ1ODczZTFlMDUyMzVjN2I5YmMxMDI2NiIsInN1YiI6IjVmOTcxODc4NjRkZTM1MDAzOGYxY2FjOCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.VWvLdS8hwH5Rw-dznQuV0OgnBdhflVXdGumNT_CbK6I",paths:{ROOT:"/",NOT_FOUND:"/404"}},k=function(){return N},C=r(43),E=r.n(C),R=function(e){var t=e.error;return Object(n.jsxs)("div",{className:E.a["".concat("error","__main")],children:[Object(n.jsx)("h1",{children:t.code}),Object(n.jsx)("h2",{children:t.errorMsg})]})};R.defaultProps={error:{code:"400",errorMsg:"Oops"}};var D=r(8),I=r(46),F=r(32),S=r(29);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function T(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var A=a.createElement("path",{className:"st1",d:"M10,18V7c0-1.1,0.9-2,2-2h0c1.1,0,2,0.9,2,2v8"}),L=a.createElement("path",{className:"st1",d:"M14,15v-1c0-1.1,0.9-2,2-2h0c1.1,0,2,0.9,2,2v1"}),B=a.createElement("path",{className:"st1",d:"M18,15v-1c0-1.1,0.9-2,2-2h0c1.1,0,2,0.9,2,2v1"}),G=a.createElement("path",{className:"st1",d:"M22,15V9c0-1.1,0.9-2,2-2h0c1.1,0,2,0.9,2,2v11"}),V=a.createElement("path",{className:"st1",d:"M10,16v4.6c0,0,0,0,0,0l-1.5-1.8c-0.8-0.9-2.2-1-3.1-0.1l0,0c-0.8,0.8-0.8,2-0.1,2.9l3.2,3.6  c1.6,1.9,4,2.9,6.4,2.9h2.5H18h0.6c4.1,0,7.4-3.3,7.4-7.4V16"});function J(e,t){var r=e.title,n=e.titleId,c=T(e,["title","titleId"]);return a.createElement("svg",M({id:"Icons",style:{enableBackground:"new 0 0 32 32"},viewBox:"0 0 32 32",xmlSpace:"preserve",ref:t,"aria-labelledby":n},c),r?a.createElement("title",{id:n},r):null,A,L,B,G,V)}var z=a.forwardRef(J),U=(r.p,r(30)),P=r.n(U),H="header",q=function(e){var t=e.search;return Object(n.jsxs)("header",{className:P.a["".concat(H)],children:[Object(n.jsxs)("div",{className:P.a["".concat(H,"__brand")],children:[Object(n.jsx)(z,{}),Object(n.jsx)("span",{children:"M.W.R."})]}),Object(n.jsxs)("div",{className:P.a["".concat(H,"__search")],children:[Object(n.jsx)("input",{placeholder:"Search...",onChange:function(e){return function(e){t(encodeURI(e.target.value))}(e)}}),Object(n.jsx)(S.b,{})]})]})},Q=function(e){return e.appReducer.movieList},W=function(e){return e.appReducer.apiConfig},Y=function(e){return e.appReducer.isLoading},Z=r(36),X=r(24),K=r.n(X),$="rating-filter",ee=function(e){var t=e.onFilterClick,r=e.filterStatus;return Object(n.jsx)("div",{className:K.a["".concat($)],children:[1,2,3,4,5].map((function(e){return Object(n.jsx)("button",{"aria-label":"rating filter",onClick:function(){return function(e){var n=!r.active||e!==r.stars;t({active:n,stars:e})}(e)},className:K.a["".concat($,"__star")],children:r.active&&r.stars>=e?Object(n.jsx)(Z.b,{className:K.a["".concat($,"__star-full")]}):Object(n.jsx)(Z.a,{className:K.a["".concat($,"__star-outline")]})},e)}))})},te=r.p+"static/media/missing-img.4ef10744.png",re=r(25),ne=r.n(re),ae=r(11),ce=r(68),ie=r(67),oe=r(21),se=r.n(oe),_e=function(e){var t=e.showContent,r=e.content,a=e.placeholder,i=e.time,o=void 0===i?600:i,s=e.type,_=void 0===s?"fade":s,u=c.a.useRef(null),l=c.a.useRef(null),d="smooth-".concat(_),v={enter:o,exit:o},p={timeout:v,classNames:{enter:se.a["".concat(d,"-enter")],enterActive:se.a["".concat(d,"-enter-active")],enterDone:se.a["".concat(d,"-enter-done")],exit:se.a["".concat(d,"-exit")],exitActive:se.a["".concat(d,"-exit-active")],exitDone:se.a["".concat(d,"-exit-done")]}};return Object(n.jsxs)(ce.a,{timeout:v,component:null,children:[t&&Object(n.jsx)(ie.a,Object(ae.a)(Object(ae.a)({nodeRef:u,in:t},p),{},{children:Object(n.jsx)("div",{ref:u,children:r()})})),!t&&Object(n.jsx)(ie.a,Object(ae.a)(Object(ae.a)({in:!t,nodeRef:l},p),{},{children:Object(n.jsx)("div",{ref:l,children:a()})}))]})};_e.defaultProps={time:600,type:"fade"};var ue,le=_e,de="movie-grid",ve=function(e){var t=e.movies,r=e.onMovieClick,a=e.ratingFilterStatus,c=e.ratingFilterClick,i=Object(d.d)(W),o=Object(d.d)(Y);return Object(n.jsxs)("div",{className:ne.a["".concat(de)],children:[Object(n.jsx)(ee,{filterStatus:a,onFilterClick:c}),Object(n.jsx)("div",{className:ne.a["".concat(de,"__container")],children:Object(n.jsx)(le,{showContent:!o,placeholder:function(){return Object(n.jsxs)("div",{className:ne.a["".concat(de,"__loader")],children:[" ",Object(n.jsx)(S.a,{})]})},content:function(){return 0===(null===t||void 0===t?void 0:t.length)?Object(n.jsx)("h2",{children:"Sorry, no results..."}):null===t||void 0===t?void 0:t.map((function(e){var t=te;if(e.poster_path){var a=null===i||void 0===i?void 0:i.images.poster_sizes[3];t="".concat(null===i||void 0===i?void 0:i.images.secure_base_url).concat(a).concat(e.poster_path)}return Object(n.jsx)("button",{"aria-label":"open details",className:ne.a["".concat(de,"__card")],onClick:function(){r(e)},children:Object(n.jsx)("img",{src:t,alt:e.title})},e.id)}))}})})]})},pe=r(44),je=r.p+"static/media/missing-back.fddbe8d0.png",fe=r(12),be=r.n(fe),me="movie-details",Oe=function(e){var t=e.movie,r=e.close,c=Object(d.d)(W),i=Object(a.useRef)(null);Object(a.useLayoutEffect)((function(){null!==t&&null!==i.current&&i.current.focus()}),[t]);return function(){var e=[be.a["".concat(me)]],a=null;if(t){e.push(be.a.show);var o=je;if(t.backdrop_path){var s=null===c||void 0===c?void 0:c.images.poster_sizes[5];o="".concat(null===c||void 0===c?void 0:c.images.secure_base_url).concat(s).concat(t.backdrop_path)}a=Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:be.a["".concat(me,"__card__description")],children:Object(n.jsx)("div",{className:be.a["".concat(me,"__card__description__row")],children:Object(n.jsx)("span",{className:be.a["".concat(me,"__card__description__row__value-title")],children:null===t||void 0===t?void 0:t.title})})}),Object(n.jsx)("img",{src:o,alt:t.title}),Object(n.jsxs)("div",{className:be.a["".concat(me,"__card__description")],children:[Object(n.jsxs)("div",{className:be.a["".concat(me,"__card__description__row")],children:[Object(n.jsx)("span",{className:be.a["".concat(me,"__card__description__row__label")],children:"Rating:"}),Object(n.jsx)("span",{className:be.a["".concat(me,"__card__description__row__value")],children:null===t||void 0===t?void 0:t.vote_average})]}),Object(n.jsx)("div",{className:be.a["".concat(me,"__card__description__row")],children:Object(n.jsx)("span",{className:be.a["".concat(me,"__card__description__row__label")],children:"Overview:"})}),Object(n.jsx)("div",{className:be.a["".concat(me,"__card__description__row")],children:Object(n.jsx)("span",{className:be.a["".concat(me,"__card__description__row__value-no-pad")],children:null===t||void 0===t?void 0:t.overview})})]})]})}return Object(n.jsx)("div",{className:e.join(" "),children:Object(n.jsxs)("div",{className:be.a["".concat(me,"__card")],children:[Object(n.jsx)("button",{"aria-label":"close",onClick:function(){r()},ref:i,className:be.a["".concat(me,"__card__close")],children:Object(n.jsx)(pe.a,{})}),a]})})}()};!function(e){e.DISCOVER="DISCOVER",e.SEARCH="SEARCH"}(ue||(ue={}));var he=r(45),xe=r.n(he),ge=function(){var e=Object(a.useState)({active:!1,stars:5}),t=Object(F.a)(e,2),r=t[0],c=t[1],i=Object(a.useState)(null),o=Object(F.a)(i,2),s=o[0],_=o[1],u=Object(a.useState)(""),l=Object(F.a)(u,2),v=l[0],p=l[1],j=Object(d.c)(),f=Object(d.d)(Q);Object(a.useEffect)((function(){var e={endpoint:ue.DISCOVER,sortBy:"popularity.desc"};v.length>=1&&(e={endpoint:ue.SEARCH,query:v,sortBy:"popularity.desc"}),j(h(e))}),[j,v]);var b=Object(a.useCallback)((function(){return r.active?null===f||void 0===f?void 0:f.results.filter((function(e){return e.vote_average<=2*r.stars&&e.vote_average>=2*(r.stars-1)})):null===f||void 0===f?void 0:f.results}),[f,r]);return Object(n.jsxs)("div",{className:xe.a["".concat("spa")],children:[Object(n.jsx)(q,{search:p}),Object(n.jsx)(ve,{movies:b(),onMovieClick:_,ratingFilterStatus:r,ratingFilterClick:c}),Object(n.jsx)(Oe,{movie:s,close:function(){return _(null)}})]})},we={ROOT:"/",NOT_FOUND:"/404"},ye=k().paths,Ne=Object(D.g)((function(){var e=null!==ye&&void 0!==ye?ye:we;return Object(n.jsxs)(D.d,{children:[Object(n.jsx)(D.b,{exact:!0,path:"/movies-with-rock"+e.ROOT,render:function(){return Object(n.jsx)(ge,{})}}),Object(n.jsx)(D.b,{path:e.NOT_FOUND,component:function(){return Object(n.jsx)(R,{error:{code:"404",errorMsg:"Page not found."}})}}),Object(n.jsx)(D.a,{to:e.NOT_FOUND})]})})),ke=function(){return Object(n.jsx)(I.a,{children:new Ne({})})},Ce=(r(63),function(e){Object(u.a)(r,e);var t=Object(l.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={boundaryError:!1},n}return Object(_.a)(r,[{key:"componentDidMount",value:function(){(0,this.props.initApp)(k())}},{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){var e,t=this.props.mainError,r=this.state.boundaryError;if(t.code||r){var a=r?{code:"400",errorMsg:"Ups..."}:t;e=Object(n.jsx)(R,{error:a})}else e=ke();return Object(n.jsx)("div",{className:"app",children:e})}}],[{key:"getDerivedStateFromError",value:function(){return{boundaryError:!0}}}]),r}(a.Component));Ce.defaultProps={appReducer:{}};var Ee,Re=Object(d.b)((function(e){var t=e.appReducer,r=t.mainError;return{config:t.config,mainError:r}}),(function(e){return{initApp:function(t){e(t?g(t):y("400","Missing Config"))}}}))(Ce),De=r(17),Ie=r(47),Fe=r(49),Se=r(20),Me=function(e,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0,a=t[n.type],c=r;return a&&(c=a(r,n)),c}}({config:null,isLoading:!1,mainError:{code:null,errorMsg:""},movieList:null,apiConfig:null},(Ee={},Object(Se.a)(Ee,v,(function(e,t){return Object(ae.a)(Object(ae.a)({},e),{},{isLoading:t.loading})})),Object(Se.a)(Ee,j,(function(e,t){return Object(ae.a)(Object(ae.a)({},e),{},{movieList:t.movieList})})),Object(Se.a)(Ee,m,(function(e,t){return Object(ae.a)(Object(ae.a)({},e),{},{mainError:{code:t.code,errorMsg:t.errorMsg}})})),Object(Se.a)(Ee,f,(function(e,t){return Object(ae.a)(Object(ae.a)({},e),{},{config:t.config})})),Object(Se.a)(Ee,b,(function(e,t){return Object(ae.a)(Object(ae.a)({},e),{},{apiConfig:t.apiConfig})})),Ee)),Te=Object(De.combineReducers)({appReducer:Me}),Ae=r(10),Le=r.n(Ae),Be=r(13),Ge=r(31),Ve=k(),Je=Ve.bearer_token,ze=Ve.api_root,Ue=function(e){return new Promise((function(t){return function(e){return e.json().catch((function(){return{}}))}(e).then((function(r){return t({status:e.status,ok:e.ok,data:r})}))}))},Pe=function(){var e=Object(Ge.a)(Le.a.mark((function e(t,r){var n,a,c,i;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Headers).append("content-type","application/json"),n.append("Accept","application/json"),n.append("Authorization","Bearer ".concat(r)),a=new Request(t,{method:"GET",headers:n,mode:"cors"}),e.next=8,fetch(a);case 8:return c=e.sent,e.next=11,Ue(c);case 11:return i=e.sent,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),He=function(){var e=Object(Ge.a)(Le.a.mark((function e(t){var r,n,a;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.endpoint.toLowerCase(),n="".concat(ze).concat(r,"/movie?"),t.sortBy&&(n="".concat(n,"&sort_by=").concat(t.sortBy)),t.query&&(n="".concat(n,"&query=").concat(t.query)),e.next=6,Pe(n,Je);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=Object(Ge.a)(Le.a.mark((function e(){var t,r;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(ze,"/configuration"),e.next=3,Pe(t,Je);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Qe=Le.a.mark((function e(){var t;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.b)(qe);case 2:if(!(t=e.sent).ok){e.next=6;break}return e.next=6,Object(Be.c)(w(t.data));case 6:case"end":return e.stop()}}),e)})),We=Le.a.mark((function e(t){var r,n;return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.d)(W);case 2:return r=e.sent,e.next=5,Object(Be.c)(O(!0));case 5:if(r){e.next=8;break}return e.next=8,Object(Be.b)(Qe);case 8:return e.next=10,Object(Be.b)(He,t.movieFetchRequest);case 10:if(!(n=e.sent).ok){e.next=16;break}return e.next=14,Object(Be.c)(x(n.data));case 14:return e.next=16,Object(Be.c)(O(!1));case 16:case"end":return e.stop()}}),e)})),Ye=Le.a.mark((function e(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.f)(250,p,We);case 2:case"end":return e.stop()}}),e)})),Ze=Le.a.mark(Ke),Xe=[Ye];function Ke(){return Le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Be.a)(Xe.map((function(e){return Object(Be.e)(Le.a.mark((function t(){return Le.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Object(Be.b)(e);case 4:return t.abrupt("break",12);case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:t.next=0;break;case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))})));case 2:case"end":return e.stop()}}),Ze)}var $e=Object(Fe.a)({onError:function(e){return console.log(e)}}),et=Object(De.applyMiddleware)($e),tt=Object(De.createStore)(Te,Object(Ie.composeWithDevTools)(et));$e.run(Ke);var rt=tt,nt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,69)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))};o.a.render(Object(n.jsx)(d.a,{store:rt,children:Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(Re,{})})}),document.getElementById("root")),nt()}},[[65,1,2]]]);
//# sourceMappingURL=main.85472eb2.chunk.js.map